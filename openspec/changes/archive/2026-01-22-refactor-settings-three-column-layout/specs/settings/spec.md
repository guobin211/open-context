# 设置页面规范增量

## 新增需求

### 需求：三栏布局结构

设置页面必须采用三栏布局，包含通用侧边栏、设置菜单和内容区域，与主界面保持一致的用户体验。

#### 场景：用户进入设置页面

- **当** 用户从主界面导航到设置页面（如点击底部的设置按钮）
- **那么** 页面展示三栏布局：
  - 最左侧显示通用 Sidebar（包含会话、笔记、文件、空间导航，宽度 240px）
  - 中间显示 SettingsMenu（包含 8 个设置分类，宽度 224px）
  - 右侧显示设置内容区域（展示选中分类的配置界面，剩余宽度自适应）

#### 场景：通用侧边栏导航可用

- **当** 用户在设置页面中
- **那么** 最左侧的通用 Sidebar 保持可交互
- **并且** 用户可以点击 Sidebar 中的导航项（如"会话"、"笔记"）快速跳转到对应页面
- **并且** 不会丢失当前设置页面的状态（通过路由系统管理）

#### 场景：设置菜单切换

- **当** 用户点击中间栏 SettingsMenu 中的某个设置分类（如"外观设置"）
- **那么** 该设置分类项高亮显示（蓝色背景）
- **并且** 右侧内容区域切换为对应的设置界面
- **并且** activeCategory 状态更新到 settings-store

### 需求：SettingsMenu 组件适配

SettingsMenu 组件必须适配三栏布局的中间栏，提供清晰的视觉层级和良好的交互体验。

#### 场景：SettingsMenu 视觉样式

- **当** SettingsMenu 渲染在中间栏
- **那么** 宽度为 224px（w-56）
- **并且** 右侧有边框（border-r border-gray-200）
- **并且** 背景色为浅灰色（bg-gray-50）
- **并且** 顶部有标题栏（高度 64px，包含"设置"标题）

#### 场景：设置菜单项展示

- **当** 用户查看 SettingsMenu
- **那么** 显示 8 个设置分类项：
  - 通用设置（Settings 图标）
  - 外观设置（Palette 图标）
  - 数据存储（Database 图标）
  - 云端存储（Cloud 图标）
  - 模型设置（BrainCircuit 图标）
  - 服务器设置（Server 图标）
  - 服务开关（ToggleLeft 图标）
  - 鉴权设置（Key 图标）
- **并且** 每个菜单项包含图标（左侧，20px）和标签（右侧）
- **并且** 当前选中项有蓝色背景和字体加粗

### 需求：设置内容区域布局

设置内容区域必须在右侧占据剩余空间，并提供合理的内容容器尺寸和滚动行为。

#### 场景：内容区域渲染

- **当** 用户选中某个设置分类
- **那么** 右侧内容区域渲染对应的设置组件
- **并且** 内容区域的最大宽度为 768px（max-w-3xl）
- **并且** 内容区域有适当的内边距（p-6）
- **并且** 内容高度超出视口时可滚动（overflow-auto）

#### 场景：顶部标题栏

- **当** 用户在设置页面
- **那么** 内容区域顶部显示标题栏（高度 64px）
- **并且** 标题栏包含当前设置分类的标题（如"通用设置"）
- **并且** 标题栏右侧有关闭按钮（X 图标），点击返回上一页

## 修改需求

### 需求：设置页面路由集成

设置页面必须与主界面的路由系统无缝集成，使用 TanStack Router 管理页面状态和导航。

#### 场景：路由入口

- **当** 用户访问 `/settings` 路由
- **那么** 渲染设置页面，使用 MainLayout 作为外层容器
- **并且** 设置页面的布局包含通用 Sidebar、SettingsMenu 和内容区域
- **并且** 默认选中"通用设置"分类（activeCategory: 'general'）

#### 场景：路由导航

- **当** 用户在设置页面点击通用 Sidebar 的导航项
- **那么** 通过 TanStack Router 跳转到对应页面
- **并且** 设置页面的状态（activeCategory）保存在 settings-store 中
- **并且** 用户返回设置页面时恢复之前的选中分类

## 移除需求

### 需求：独立两栏布局

**原因**：独立两栏布局与主界面不一致，用户无法在设置页面中访问全局导航

**迁移**：将 `settings-layout.tsx` 中的独立布局逻辑迁移到三栏布局，复用 MainLayout 组件

#### 场景：移除独立 Sidebar

- **当** 重构完成后
- **那么** `settings-layout.tsx` 不再包含独立的 Sidebar 实现
- **并且** 不再有"设置"标题的独立标题栏（高度 64px，包含"设置"文本和关闭按钮）
- **并且** SettingsMenu 不再占据整个左侧区域

#### 场景：移除独立两栏容器

- **当** 重构完成后
- **那么** `settings-layout.tsx` 的根容器不再是 `flex h-screen bg-white`
- **并且** 不再包含 `aside` 和 `main` 的两栏分割
- **并且** 使用 MainLayout 的插槽机制渲染设置页面内容
