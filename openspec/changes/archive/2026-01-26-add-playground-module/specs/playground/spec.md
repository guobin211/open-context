## 新增需求

### 需求：Playground 路由模块

系统必须提供一个独立的 Playground 路由模块（`/playground`），采用左右分栏布局，用于开发和测试各种编辑器、查看器和工具组件。

#### 场景：显示左右分栏布局

- **当** 用户访问任意 `/playground/*` 路径
- **那么** 系统显示左右分栏布局
- **并且** 左侧为固定宽度 240px 的导航栏
- **并且** 右侧为 flex-1 自适应宽度的内容区

#### 场景：导航栏 Y 轴滚动

- **当** 导航列表项超过视口高度
- **那么** 导航栏支持 Y 轴滚动
- **并且** 滚动条样式与应用主题一致

#### 场景：内容区 Y 轴滚动

- **当** 内容区内容超过视口高度
- **那么** 内容区支持 Y 轴滚动
- **并且** 标题栏和工具栏固定不滚动

#### 场景：访问入口页面

- **当** 用户访问 `/playground` 根路径
- **那么** 左侧导航栏显示 16 个子页面链接
- **并且** 每个链接显示图标、标题和简短描述
- **并且** 右侧内容区显示欢迎信息或使用说明

#### 场景：懒加载子页面

- **当** 用户点击任意子页面链接
- **那么** 系统延迟加载对应组件（React.lazy）
- **并且** 在加载期间显示加载状态

#### 场景：错误边界处理

- **当** 子页面组件加载失败
- **那么** 系统显示友好的错误提示
- **并且** 提供返回首页按钮

### 需求：Markdown 编辑器

系统必须提供 Markdown 编辑器组件，支持 GitHub Flavored Markdown（GFM）语法和实时预览。

#### 场景：分屏编辑和预览

- **当** 用户在 `/playground/markdown` 输入 Markdown 文本
- **那么** 系统在右侧实时渲染预览
- **并且** 支持代码高亮、表格、任务列表等 GFM 扩展语法

#### 场景：切换预览模式

- **当** 用户点击工具栏的预览模式按钮
- **那么** 系统在「分屏」、「仅编辑」、「仅预览」三种模式间切换

### 需求：代码编辑器

系统必须提供基于 Monaco Editor 的代码编辑器，支持多种编程语言和语法高亮。

#### 场景：切换编程语言

- **当** 用户在 `/playground/code-editor` 选择语言（TypeScript/JavaScript/Python/Rust 等）
- **那么** 系统切换对应的语法高亮和自动补全
- **并且** 保留当前编辑的内容

#### 场景：主题切换

- **当** 用户切换应用暗色模式
- **那么** Monaco Editor 自动切换到 vs-dark 主题
- **并且** 保持代码内容和光标位置

### 需求：富文本编辑器

系统必须复用现有的 Tiptap 富文本编辑器组件。

#### 场景：展示编辑器功能

- **当** 用户访问 `/playground/rich-text`
- **那么** 系统显示完整的 Tiptap 编辑器
- **并且** 工具栏包含加粗、斜体、列表、链接等功能

### 需求：JSON 编辑器

系统必须提供 JSON 编辑器，支持可编辑模式和只读树形视图。

#### 场景：编辑和验证 JSON

- **当** 用户在 `/playground/json-editor` 输入 JSON 文本
- **那么** 系统实时验证格式
- **并且** 格式错误时显示错误行号和提示

#### 场景：切换视图模式

- **当** 用户切换到树形视图模式
- **那么** 系统显示可折叠的 JSON 树结构
- **并且** 支持节点展开/收起和复制路径

### 需求：文件树

系统必须复用现有的文件树组件并提供演示数据。

#### 场景：展示文件树功能

- **当** 用户访问 `/playground/file-tree`
- **那么** 系统显示模拟的文件夹结构
- **并且** 支持展开/收起、右键菜单等交互

### 需求：文件管理器

系统必须提供类似 Spacedrive 的文件管理器，支持网格视图和文件预览。

#### 场景：网格视图显示文件

- **当** 用户访问 `/playground/file-manager`
- **那么** 系统以网格形式显示文件卡片
- **并且** 图片文件显示缩略图
- **并且** 支持虚拟滚动（react-window）

#### 场景：预览文件

- **当** 用户点击文件卡片
- **那么** 系统在右侧面板显示文件预览
- **并且** 支持图片、文本、Markdown 等格式

### 需求：终端模拟器

系统必须提供基于 xterm.js 的终端模拟器，支持 ANSI 颜色和控制序列。

#### 场景：模拟命令执行

- **当** 用户在 `/playground/terminal` 输入命令（如 `ls`、`echo`）
- **那么** 系统模拟输出结果
- **并且** 支持命令历史（上下箭头）

#### 场景：自适应终端大小

- **当** 用户调整浏览器窗口大小
- **那么** 终端自动调整行列数（addon-fit）
- **并且** 保持内容完整显示

### 需求：PDF 查看器

系统必须提供 PDF 查看器，支持分页渲染和缩放控制。

#### 场景：加载和显示 PDF

- **当** 用户上传 PDF 文件或提供示例 PDF
- **那么** 系统渲染第一页
- **并且** 显示总页数和当前页码

#### 场景：翻页和缩放

- **当** 用户点击翻页按钮或滚动
- **那么** 系统加载并显示对应页面
- **并且** 支持 50%-200% 缩放

### 需求：聊天界面

系统必须提供聊天界面组件，支持消息气泡和输入框。

#### 场景：发送和显示消息

- **当** 用户在 `/playground/chat` 输入文本并发送
- **那么** 系统添加消息气泡到聊天区
- **并且** 显示时间戳和发送者头像

#### 场景：自动滚动到底部

- **当** 新消息添加
- **那么** 聊天区自动滚动到最新消息
- **并且** 用户手动滚动后停止自动滚动

### 需求：AST 查看器

系统必须提供代码 AST 可视化工具，基于 tree-sitter-wasm 和 React Flow。

#### 场景：解析代码生成 AST

- **当** 用户在 `/playground/ast-viewer` 输入代码
- **那么** 系统使用 tree-sitter 解析生成语法树
- **并且** 以可视化图形展示节点关系

### 需求：图片编辑器

系统必须提供图片编辑和压缩工具。

#### 场景：裁剪和滤镜

- **当** 用户上传图片并使用裁剪工具
- **那么** 系统提供矩形选区和比例锁定
- **并且** 支持灰度、模糊等滤镜效果

#### 场景：压缩图片

- **当** 用户调整压缩质量滑块
- **那么** 系统实时显示压缩后的文件大小
- **并且** 支持导出为 JPEG/PNG/WebP

### 需求：Excel 查看器

系统必须提供类 Excel 表格查看器。

#### 场景：加载和显示表格

- **当** 用户上传 Excel 文件或提供示例数据
- **那么** 系统渲染表格内容
- **并且** 支持单元格选择和滚动

### 需求：Word 查看器

系统必须提供 Word 文档查看器。

#### 场景：渲染 DOCX 文件

- **当** 用户上传 DOCX 文件
- **那么** 系统渲染文档内容（保留格式）
- **并且** 支持分页显示

### 需求：数据可视化

系统必须提供基于 AntV G2 和 X6 的数据可视化工具。

#### 场景：显示图表示例

- **当** 用户访问 `/playground/data-viz`
- **那么** 系统显示 3-5 种常用图表类型（折线图、柱状图、饼图等）
- **并且** 支持交互式图例和提示框

#### 场景：显示流程图示例

- **当** 用户切换到流程图标签
- **那么** 系统显示使用 X6 绘制的流程图示例
- **并且** 支持节点拖拽和连线

### 需求：工作流编辑器

系统必须提供基于 React Flow 的工作流编辑器。

#### 场景：拖拽创建节点

- **当** 用户从侧边栏拖拽节点到画布
- **那么** 系统创建新节点实例
- **并且** 支持连接节点形成工作流

#### 场景：删除节点和连线

- **当** 用户选中节点或连线并按 Delete 键
- **那么** 系统删除选中元素
- **并且** 清理相关的连接关系

### 需求：统一布局

所有 Playground 子页面必须使用统一的左右分栏布局组件。

#### 场景：渲染标准布局

- **当** 任意子页面加载
- **那么** 系统渲染包含以下部分的布局：
  - 左侧：240px 固定宽度导航栏（支持 Y 轴滚动）
  - 右侧：flex-1 自适应内容区，包含：
    - 顶部：48px 固定标题栏（显示页面标题和返回按钮）
    - 中间：自适应高度的主体内容（支持 Y 轴滚动）
    - 底部：40px 工具栏（可选，部分页面显示）

#### 场景：导航高亮当前页面

- **当** 用户在某个子页面
- **那么** 左侧导航栏对应项高亮显示
- **并且** 自动滚动到可见区域

### 需求：暗色模式适配

所有 Playground 组件必须支持暗色模式。

#### 场景：跟随系统主题

- **当** 用户切换应用暗色模式
- **那么** 所有编辑器和查看器组件切换到暗色主题
- **并且** 保持内容和状态不变

### 需求：国际化支持

所有 Playground 页面的 UI 文本必须支持国际化。

#### 场景：切换语言

- **当** 用户切换应用语言（中文/英文/日文等）
- **那么** Playground 所有 UI 文本（标题、按钮、提示）切换到对应语言
- **并且** 编辑器内容语言保持不变

### 需求：性能优化

Playground 模块必须确保良好的加载性能。

#### 场景：代码分割

- **当** 用户首次访问 `/playground`
- **那么** 系统仅加载首页导航组件（< 100 KB）
- **并且** 子页面组件按需懒加载

#### 场景：Lighthouse 评分

- **当** 运行 Lighthouse 性能测试
- **那么** Performance 评分必须 > 90
- **并且** 首次内容绘制（FCP）< 1.5 秒
