# 变更：整理前端页面路由结构

## 为什么问题

当前前端路由系统存在以下问题：

1. **缺乏统一规范**：各顶层路由（launcher、browser、terminal、settings、workspace）缺少明确的功能定位和职责定义，导致开发者对每个路由的理解和使用方式不一致
2. **路由切换机制不清晰**：缺少统一的路由间导航规范，状态管理和上下文传递逻辑分散在各组件中，难以维护
3. **Playground 定位模糊**：Playground 路由的用途在规范中描述不够明确，容易被误认为是主应用功能而非开发调试工具
4. **缺少架构文档**：路由系统涉及多个技术决策（路由状态管理、权限控制、性能优化等），缺少系统性的技术设计文档指导实施

## 变更内容

本次变更将建立清晰的前端路由规范，包括：

1. **明确五个顶层路由**：launcher（启动器）、browser（浏览器模式）、terminal（终端模式）、settings（设置）、workspace（工作区）的功能定位和职责
2. **定义路由切换机制**：统一路由间的导航和切换流程，规范状态管理和上下文传递
3. **完善 Playground 规范**：明确其为开发和测试专用的组件演示页面，不属于主应用功能
4. **实现多窗口状态同步**：通过 Tauri 事件系统和 JSON 数据实现跨窗口状态同步，确保多窗口体验一致
5. **添加路由架构设计**：提供详细的技术决策和实施指导，包括路由配置、状态管理、性能优化、日志记录等

## 影响范围

- 受影响规范：playground
- 受影响代码：
  - `apps/open-web/src/routes/` - 所有路由文件
  - `apps/open-web/src/storage/` - 全局状态 stores（Zustand）
  - `apps/open-web/src/context/` - 路由级别的 Context Providers
- 新增文档：`[changes]/refactor-web-routes/design.md` - 路由架构设计文档

## 技术决策

- **路由框架**：TanStack Router 文件系统路由
- **状态管理**：Zustand（全局）+ React Context（路由局部）
- **多窗口同步**：Tauri 事件系统 + JSON 序列化
- **日志记录**：项目内置的 logger（不使用外部监控 SDK）
- **性能监控**：手动 logger 记录（不集成性能监控 SDK）
- **权限控制**：当前版本不实现（所有路由对已登录用户开放）
